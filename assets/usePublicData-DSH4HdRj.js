import{r as s,e as i,f as g}from"./index-VVMnSIGw.js";const l=()=>{if(typeof window>"u")return[];const e=localStorage.getItem("dua_bookmarks");return e?JSON.parse(e).map(t=>Number(t)):[]},m=e=>{if(typeof window>"u")return[];const t=l(),r=t.includes(e)?t.filter(o=>o!==e):[...t,e];return localStorage.setItem("dua_bookmarks",JSON.stringify(r)),window.dispatchEvent(new Event("bookmarks-updated")),r},p=e=>l().includes(e);function w(){const[e,t]=s.useState([]),[r,o]=s.useState(!0),[d,u]=s.useState(null);return s.useEffect(()=>{const f=async()=>{try{const a=await i.getAll("categories");a&&a.length>0?(t(a),o(!1),navigator.onLine&&c()):navigator.onLine?await c():o(!1)}catch(a){console.error("Failed to load data",a),u("Failed to load data"),o(!1)}},c=async()=>{try{const a=await g.get("/categories?include=duas"),n=a.data.data||a.data;n&&(await i.clear("categories"),await i.putAll("categories",n),t(n))}catch(a){console.error("Background sync failed",a)}finally{o(!1)}};f()},[]),{categories:e,loading:r,error:d}}export{l as g,p as i,m as t,w as u};
