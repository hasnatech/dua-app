import{r as f,m as E,j as e,L as P}from"./app-CMgd9CFO.js";import{I as u}from"./input-error-BII2_NsQ.js";import{T as v}from"./text-link-CDXJR4sK.js";import{B as x}from"./button-Daq97pcb.js";import{C as _}from"./checkbox-BcxLsRRc.js";import{I as n}from"./input-HZKsKJ3U.js";import{L as l}from"./label-Dtgay8E_.js";import{A as q}from"./auth-layout-DM2nryWY.js";import{L as j}from"./loader-circle-Ck6Q4JL4.js";import"./utils-jAU0Cazi.js";import"./index-BCYOheS7.js";import"./index-DZZQifJx.js";import"./index-Dws4ymEe.js";import"./index-DqV8gE2B.js";import"./index-gfCreU1N.js";import"./index-tFwqN7HY.js";import"./index-BuHSMQr-.js";import"./check-D-GLxgsM.js";import"./createLucideIcon-7qGfDxei.js";function se({status:b,canResetPassword:w}){const[h,N]=f.useState(!1),[y,I]=f.useState(!1),c=f.useRef([]),{data:r,setData:o,post:d,processing:i,errors:p,reset:L}=E({email:"",password:"",remember:!1,otp_arr:["","","","","",""],otp:""}),O=s=>{s.preventDefault(),d(route("login"),{onFinish:()=>L("password")})},C=s=>{s.preventDefault(),d(route("login.otp.store"),{onSuccess:()=>I(!0)})},S=s=>{s.preventDefault(),d(route("login.otp.verify"))},D=(s,t)=>{var m;const{value:a}=s.target;if(/^\d*$/.test(a)&&a.length<=1){const g=[...r.otp_arr];g[t]=a,o("otp_arr",g),o("otp",g.join("")),a&&t<5&&((m=c.current[t+1])==null||m.focus())}},F=(s,t)=>{var a;s.key==="Backspace"&&!r.otp_arr[t]&&t>0&&((a=c.current[t-1])==null||a.focus())},k=s=>{var a;s.preventDefault();const t=s.clipboardData.getData("text/plain").trim();if(/^\d{6}$/.test(t)){const m=t.split("");o("otp_arr",m),o("otp",m.join("")),(a=c.current[5])==null||a.focus(),d(route("login.otp.verify"))}};return e.jsxs(q,{title:"Log in to your account",description:"Enter your email and password below to log in",children:[e.jsx(P,{title:"Log in"}),h?y?e.jsx("form",{className:"flex flex-col gap-6",onSubmit:S,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"email",children:"Email address"}),e.jsx(n,{id:"email",type:"email",readOnly:!0,value:r.email,className:"bg-gray-100 cursor-not-allowed"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"otp",children:"OTP"}),e.jsx("div",{className:"flex space-x-2",children:r.otp_arr.map((s,t)=>e.jsx(n,{id:`otp-${t}`,type:"text",maxLength:1,value:s,onChange:a=>D(a,t),onKeyDown:a=>F(a,t),onPaste:t===0?k:void 0,ref:a=>c.current[t]=a,className:"w-12 text-center",tabIndex:t+1},t))}),e.jsx(u,{message:p.otp})]}),e.jsxs(x,{type:"submit",className:"mt-4 w-full",tabIndex:7,disabled:i,children:[i&&e.jsx(j,{className:"h-4 w-4 animate-spin"}),"Log in"]})]})}):e.jsx("form",{className:"flex flex-col gap-6",onSubmit:C,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"email",children:"Email address"}),e.jsx(n,{id:"email",type:"email",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"email",value:r.email,onChange:s=>o("email",s.target.value),placeholder:"email@example.com"}),e.jsx(u,{message:p.email})]}),e.jsxs(x,{type:"submit",className:"mt-4 w-full",tabIndex:2,disabled:i,children:[i&&e.jsx(j,{className:"h-4 w-4 animate-spin"}),"Send OTP to mail"]})]})}):e.jsx("form",{className:"flex flex-col gap-6",onSubmit:O,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"email",children:"Email address"}),e.jsx(n,{id:"email",type:"email",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"email",value:r.email,onChange:s=>o("email",s.target.value),placeholder:"email@example.com"}),e.jsx(u,{message:p.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{htmlFor:"password",children:"Password"}),w&&e.jsx(v,{href:route("password.request"),className:"ml-auto text-sm",tabIndex:5,children:"Forgot password?"})]}),e.jsx(n,{id:"password",type:"password",required:!0,tabIndex:2,autoComplete:"current-password",value:r.password,onChange:s=>o("password",s.target.value),placeholder:"Password"}),e.jsx(u,{message:p.password})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_,{id:"remember",name:"remember",checked:r.remember,onClick:()=>o("remember",!r.remember),tabIndex:3}),e.jsx(l,{htmlFor:"remember",children:"Remember me"})]}),e.jsxs(x,{type:"submit",className:"mt-4 w-full",tabIndex:4,disabled:i,children:[i&&e.jsx(j,{className:"h-4 w-4 animate-spin"}),"Log in"]})]})}),e.jsx("div",{className:"mt-4 text-center text-sm",children:e.jsx(x,{variant:"link",onClick:()=>N(!h),children:h?"Sign in with password":"Sign in with OTP"})}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",e.jsx(v,{href:route("register"),tabIndex:5,children:"Sign up"})]}),b&&e.jsx("div",{className:"mb-4 text-center text-sm font-medium text-green-600",children:b})]})}export{se as default};
