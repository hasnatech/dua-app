import{r as c,m as P,j as e}from"./app-CMgd9CFO.js";import{I as q}from"./input-error-BII2_NsQ.js";import{L as p}from"./loader-B0VTZSLt.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-7qGfDxei.js";function T({status:C,canResetPassword:F}){const[u,E]=c.useState(!1),[g,x]=c.useState(!1),l=c.useRef([]),{data:o,setData:i,post:d,processing:a,errors:f,reset:h}=P({email:"",password:"",remember:!1,otp_arr:["","","","","",""],otp:""}),y=s=>{s.preventDefault(),d(route("login"),{onFinish:()=>h("password")})},b=s=>{s.preventDefault(),d(route("login.otp.store"),{onSuccess:()=>x(!0)})},j=s=>{s.preventDefault(),d(route("login.otp.verify"))},w=(s,r)=>{var n;const{value:t}=s.target;if(/^\d*$/.test(t)&&t.length<=1){const m=[...o.otp_arr];m[r]=t,i("otp_arr",m),i("otp",m.join("")),t&&r<5&&((n=l.current[r+1])==null||n.focus())}},v=(s,r)=>{var t;s.key==="Backspace"&&!o.otp_arr[r]&&r>0&&((t=l.current[r-1])==null||t.focus())},N=s=>{var t;s.preventDefault();const r=s.clipboardData.getData("text/plain").trim();if(/^\d{6}$/.test(r)){const n=r.split("");i("otp_arr",n),i("otp",n.join("")),(t=l.current[5])==null||t.focus(),d(route("login.otp.verify"))}},O=()=>e.jsx("div",{children:e.jsxs("form",{className:"space-y-6",onSubmit:y,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email-address",className:"",children:"Email address"}),e.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Email address",value:o.email,onChange:s=>i(r=>({...r,email:s.target.value})),disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Password",value:o.password,onChange:s=>i(r=>({...r,password:s.target.value})),disabled:a})]}),f.email&&e.jsx(q,{message:f.email})]}),e.jsxs("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-primary hover:bg-highlight focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:bg-slate-300",children:[a&&e.jsx(p,{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"}),"Sign in"]}),e.jsx("div",{className:"space-y-8"})]})}),S=()=>e.jsxs("form",{className:"space-y-6",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email-otp-request",className:"sr-only",children:"Email address"}),e.jsx("input",{id:"email-otp-request",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"email@example.com",value:o.email,onChange:s=>i(r=>({...r,email:s.target.value})),disabled:a,autoFocus:!0})]}),e.jsxs("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-primary hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:bg-green-300",children:[a&&e.jsx(p,{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"}),"Send OTP"]})]}),D=()=>e.jsxs("form",{className:"space-y-6",onSubmit:j,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Enter the 6-digit code sent to:"}),e.jsx("p",{className:"font-medium text-dark",children:o.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"sr-only",children:"OTP"}),e.jsx("div",{className:"flex justify-center space-x-2",children:o.otp_arr.map((s,r)=>e.jsx("input",{id:`otp-${r}`,type:"text",inputMode:"numeric",maxLength:1,value:s,onChange:t=>w(t,r),onKeyDown:t=>v(t,r),onPaste:r===0?N:void 0,ref:t=>{l.current[r]=t},className:"w-12 h-12 text-center text-lg font-semibold border border-gray-300 rounded-md focus:ring-primary focus:border-primary",disabled:a,required:!0},r))})]}),e.jsxs("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-primary hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:bg-green-300",children:[a&&e.jsx(p,{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"}),"Verify & Sign In"]})]});return e.jsx("div",{className:"bg-primary-light min-h-screen flex items-start justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-6 bg-white p-10 rounded-xl shadow-lg",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/images/logo.png",alt:"",className:"w-32"})}),e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-dark font-serif",children:u?"Sign in with OTP":"Sign in to your account"})}),u?g?D():S():O()]})})}export{T as default};
