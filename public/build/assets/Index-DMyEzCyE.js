import{r as o,j as r,S as l,U as v}from"./app-CMgd9CFO.js";import{B as m}from"./button-Daq97pcb.js";import{I as N}from"./input-HZKsKJ3U.js";import{A as j}from"./application-layout-cxP3cXNc.js";import w from"./AgGridTable-Ml2x6P89.js";import{ICCellRenderer as y}from"./Components-CmBqXCa1.js";import{N as C,l as S,m as _,C as b,A as R}from"./renderers-BwbMJDu8.js";import{u as k}from"./useTranslation-Ca9ACeu7.js";import{X as D}from"./x-BWEyVoTj.js";import{S as I}from"./search-LkEQWFqZ.js";import"./index-BCYOheS7.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-7qGfDxei.js";import"./paw-print-D0UC6vtx.js";import"./sparkles-DqCGk1FT.js";import"./calendar-C2mHZHpm.js";import"./plus-CceXe7IT.js";import"./user-BaUwBdqr.js";import"./index-BuHSMQr-.js";import"./loader-circle-Ck6Q4JL4.js";import"./octagon-x-BipK8g0c.js";import"./circle-check-_zxMHciY.js";import"./WeeklyStatus-D3d20abn.js";import"./chevron-left-CX5OGnks.js";import"./chevron-right-NGM6CfF9.js";import"./library-E2nNABdg.js";import"./sun-DGPMDXGc.js";import"./PetDetailsSidebar-BDRneoM-.js";import"./constant-C0FE7K3f.js";import"./types-BJro-4LP.js";import"./send-CvqZSALe.js";import"./check-D-GLxgsM.js";function pe({pets:t,settings:T,search:p,filters:A}){const{t:h}=k(),[u,x]=o.useState(t.data);o.useEffect(()=>{x(t.data)},[t.data]);const[s,c]=o.useState(p||""),i=e=>{},d=()=>{l.get(route("search"),{search:s},{preserveState:!1})},f=o.useMemo(()=>[{colId:"no",headerName:"No",valueGetter:e=>(t.current_page-1)*t.per_page+e.node.rowIndex+1,width:60,pinned:"left"},{colId:"name",headerName:"Name",cellRenderer:C,width:120,valueGetter:e=>{var a;return(a=e.data)==null?void 0:a.name},pinned:"left",wrapText:!0,autoHeight:!0},{field:"cremationDate",headerName:"Cremation Date",valueFormatter:e=>e.value?new Date(e.value).toLocaleString("nl-BE"):""},{field:"cremationType",headerName:"I / C",width:120,cellRenderer:y},{field:"customer_name",headerName:"Customer",flex:1,cellRenderer:S,width:120},{field:"tagNumber",headerName:"Tag",width:120},{field:"status",headerName:"Status",cellRenderer:b,minWidth:180,valueGetter:e=>_(e.data.status),editable:!1},{field:"pickupDateTime",headerName:"Pick up",flex:1,minWidth:180,valueFormatter:e=>e.value?new Date(e.value).toLocaleString("nl-BE"):""},{colId:"actions",headerName:h("actions"),width:130,pinned:"right",cellRenderer:R,sortable:!1,filter:!1,resizable:!1}],[i,t.current_page]);return r.jsxs(j,{children:[r.jsx("div",{className:"mb-4 flex flex-col space-y-4",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-2 flex-grow max-w-2xl",children:[r.jsxs("div",{className:"relative flex-grow",children:[r.jsx(N,{placeholder:"Pet Name, Customer, Breed or Tag...",value:s,className:"pr-10 bg-white",onChange:e=>c(e.target.value),onKeyDown:e=>e.key==="Enter"&&d()}),s&&r.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:r.jsx(D,{className:"h-4 w-4"})})]}),r.jsxs(m,{onClick:d,className:"bg-primary hover:bg-primary/90",children:[r.jsx(I,{className:"mr-2 h-4 w-4"}),"Search"]})]})})}),r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between px-1",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h3",{className:"text-2xl font-bold text-primary",children:"Search Results"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",r.jsx("strong",{children:t.from||0})," - ",r.jsx("strong",{children:t.to||0})," of ",r.jsx("strong",{children:t.total})," records found"]})]})}),r.jsx("div",{className:"h-[650px] w-full overflow-hidden",children:r.jsx(w,{title:"",description:"",isFilter:!1,pets:u,columnDefs:f,onUpdatePet:i})}),t.last_page>1&&r.jsxs("div",{className:"flex items-center justify-center space-x-2 py-4",children:[r.jsx(m,{variant:"outline",size:"sm",disabled:t.current_page===1,onClick:()=>l.visit(t.prev_page_url),children:"Previous"}),Array.from({length:t.last_page},(e,a)=>a+1).filter(e=>{const a=t.current_page;return e===1||e===t.last_page||e>=a-2&&e<=a+2}).map((e,a,g)=>r.jsxs(v.Fragment,{children:[a>0&&g[a-1]!==e-1&&r.jsx("span",{className:"px-2 text-gray-400",children:"..."}),r.jsx(m,{variant:t.current_page===e?"default":"outline",size:"sm",onClick:()=>{const n=new URL(t.path,window.location.origin);n.searchParams.set("page",e.toString()),s&&n.searchParams.set("search",s),l.visit(n.toString())},children:e})]},e)),r.jsx(m,{variant:"outline",size:"sm",disabled:t.current_page===t.last_page,onClick:()=>l.visit(t.next_page_url),children:"Next"})]})]})]})}export{pe as default};
