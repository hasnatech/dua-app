import{j as s,r as k,b as _e}from"./app-CMgd9CFO.js";import{c as we}from"./index-DZZQifJx.js";import{c as le}from"./utils-jAU0Cazi.js";import{r as Ne}from"./index-BuHSMQr-.js";import{P as j}from"./types-BJro-4LP.js";import{E as je,C as ve,S as ce}from"./send-CvqZSALe.js";import{c as O}from"./createLucideIcon-7qGfDxei.js";import{X as $}from"./x-BWEyVoTj.js";import{C as ee}from"./check-D-GLxgsM.js";import{C as ke}from"./circle-check-_zxMHciY.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Pe=O("Bell",Ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Se=O("CircleCheckBig",Re);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Te=O("Pencil",De);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Oe=O("Printer",Ie);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Ee=O("Trash",Me),Fe=we("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function ze({className:e,variant:t,...r}){return s.jsx("div",{"data-slot":"alert",role:"alert",className:le(Fe({variant:t}),e),...r})}function Ae({className:e,...t}){return s.jsx("div",{"data-slot":"alert-description",className:le("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}var de=Symbol.for("immer-nothing"),ne=Symbol.for("immer-draftable"),g=Symbol.for("immer-state");function y(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var S=Object.getPrototypeOf;function D(e){return!!e&&!!e[g]}function P(e){var t;return e?ue(e)||Array.isArray(e)||!!e[ne]||!!((t=e.constructor)!=null&&t[ne])||M(e)||Y(e):!1}var $e=Object.prototype.constructor.toString();function ue(e){if(!e||typeof e!="object")return!1;const t=S(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===$e}function F(e,t){W(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function W(e){const t=e[g];return t?t.type_:Array.isArray(e)?1:M(e)?2:Y(e)?3:0}function J(e,t){return W(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fe(e,t,r){const n=W(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function We(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function M(e){return e instanceof Map}function Y(e){return e instanceof Set}function C(e){return e.copy_||e.base_}function V(e,t){if(M(e))return new Map(e);if(Y(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=ue(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[g];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const l=i[a],o=n[l];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[l]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[l]})}return Object.create(S(e),n)}else{const n=S(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function te(e,t=!1){return q(e)||D(e)||!P(e)||(W(e)>1&&Object.defineProperties(e,{set:{value:E},add:{value:E},clear:{value:E},delete:{value:E}}),Object.freeze(e),t&&Object.values(e).forEach(r=>te(r,!0))),e}function E(){y(2)}function q(e){return Object.isFrozen(e)}var Ye={};function R(e){const t=Ye[e];return t||y(0,e),t}var T;function xe(){return T}function qe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function se(e,t){t&&(R("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function X(e){Q(e),e.drafts_.forEach(He),e.drafts_=null}function Q(e){e===T&&(T=e.parent_)}function ie(e){return T=qe(T,e)}function He(e){const t=e[g];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[g].modified_&&(X(t),y(4)),P(e)&&(e=z(t,e),t.parent_||A(t,e)),t.patches_&&R("Patches").generateReplacementPatches_(r[g].base_,e,t.patches_,t.inversePatches_)):e=z(t,r,[]),X(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==de?e:void 0}function z(e,t,r){if(q(t))return t;const n=t[g];if(!n)return F(t,(i,a)=>oe(e,n,t,i,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return A(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,l=!1;n.type_===3&&(a=new Set(i),i.clear(),l=!0),F(a,(o,c)=>oe(e,n,i,o,c,r,l)),A(e,i,!1),r&&e.patches_&&R("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function oe(e,t,r,n,i,a,l){if(D(i)){const o=a&&t&&t.type_!==3&&!J(t.assigned_,n)?a.concat(n):void 0,c=z(e,i,o);if(fe(r,n,c),D(c))e.canAutoFreeze_=!1;else return}else l&&r.add(i);if(P(i)&&!q(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;z(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(M(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&A(e,i)}}function A(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&te(t,r)}function Ue(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:xe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=re;r&&(i=[n],a=I);const{revoke:l,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=l,o}var re={get(e,t){if(t===g)return e;const r=C(e);if(!J(r,t))return Ke(e,r,t);const n=r[t];return e.finalized_||!P(n)?n:n===L(e.base_,t)?(B(e),e.copy_[t]=G(n,e)):n},has(e,t){return t in C(e)},ownKeys(e){return Reflect.ownKeys(C(e))},set(e,t,r){const n=he(C(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=L(C(e),t),a=i==null?void 0:i[g];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(We(r,i)&&(r!==void 0||J(e.base_,t)))return!0;B(e),Z(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return L(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,B(e),Z(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=C(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){y(11)},getPrototypeOf(e){return S(e.base_)},setPrototypeOf(){y(12)}},I={};F(re,(e,t)=>{I[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});I.deleteProperty=function(e,t){return I.set.call(this,e,t,void 0)};I.set=function(e,t,r){return re.set.call(this,e[0],t,r,e[0])};function L(e,t){const r=e[g];return(r?C(r):e)[t]}function Ke(e,t,r){var i;const n=he(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function he(e,t){if(!(t in e))return;let r=S(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=S(r)}}function Z(e){e.modified_||(e.modified_=!0,e.parent_&&Z(e.parent_))}function B(e){e.copy_||(e.copy_=V(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Le=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const l=this;return function(c=a,...f){return l.produce(c,u=>r.call(this,u,...f))}}typeof r!="function"&&y(6),n!==void 0&&typeof n!="function"&&y(7);let i;if(P(t)){const a=ie(this),l=G(t,void 0);let o=!0;try{i=r(l),o=!1}finally{o?X(a):Q(a)}return se(a,n),ae(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===de&&(i=void 0),this.autoFreeze_&&te(i,!0),n){const a=[],l=[];R("Patches").generateReplacementPatches_(t,i,a,l),n(a,l)}return i}else y(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...o)=>this.produceWithPatches(l,c=>t(c,...o));let n,i;return[this.produce(t,r,(l,o)=>{n=l,i=o}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){P(e)||y(8),D(e)&&(e=Be(e));const t=ie(this),r=G(e,void 0);return r[g].isManual_=!0,Q(t),r}finishDraft(e,t){const r=e&&e[g];(!r||!r.isManual_)&&y(9);const{scope_:n}=r;return se(n,t),ae(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=R("Patches").applyPatches_;return D(e)?n(e,t):this.produce(e,i=>n(i,t))}};function G(e,t){const r=M(e)?R("MapSet").proxyMap_(e,t):Y(e)?R("MapSet").proxySet_(e,t):Ue(e,t);return(t?t.scope_:xe()).drafts_.push(r),r}function Be(e){return D(e)||y(10,e),me(e)}function me(e){if(!P(e)||q(e))return e;const t=e[g];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=V(e,t.scope_.immer_.useStrictShallowCopy_)}else r=V(e,!0);return F(r,(n,i)=>{fe(r,n,me(i))}),t&&(t.finalized_=!1),r}var Je=new Le,Ve=Je.produce;const v=({text:e,colorClass:t})=>s.jsx("span",{className:`inline-flex rounded-md px-3 text-xs leading-5 font-semibold ${t}`,children:e}),Xe=e=>e.data?s.jsxs("div",{className:"self-start py-1 leading-tight",children:[s.jsx("div",{className:"text-base font-bold",children:e.data.name}),s.jsx("div",{className:"text-active text-sm font-light",children:e.data.breed}),s.jsxs("div",{className:"text-active text-sm font-light",children:[e.data.weight," Kg"]})]}):null,Qe=e=>e.data?s.jsxs("div",{className:"self-start py-1 leading-tight",children:[s.jsx("div",{className:"text-base font-bold",children:e.data.customer.name}),s.jsx("div",{className:"text-active text-sm font-light",children:e.data.customer.phone})]}):null,Ze=e=>e.data?s.jsxs("div",{className:"self-start py-1 leading-tight",children:[s.jsxs("div",{className:"flex",children:[e.data.chamber===0||e.data.chamber==null?"":s.jsx("div",{className:"fire w-5 h-5"}),s.jsx("div",{children:s.jsx("div",{className:`text-base font-bold ${e.data.preparationStatus===j.COMPLETED?"text-green-700":""}`,children:e.data.name})})]}),s.jsx("div",{className:`text-active text-sm font-light ${e.data.preparationStatus===j.COMPLETED?"text-green-700":""}`,children:e.data.breed})]}):null,Ge=e=>{var i;if(!((i=e.data)!=null&&i.preparationData))return s.jsx(v,{text:"No",colorClass:"bg-red-500 text-white"});const t=e.data.preparationData.readyForCremation==="Yes",r=t?"Yes":"No",n=t?"bg-green-500 text-white":"bg-red-500 text-white";return s.jsx(v,{text:r,colorClass:n})},ge=e=>e;function et(e){return s.jsx("input",{...e,className:`rounded-md border border-gray-300 p-2 ${e.className}`})}var ye=(e=>(e.WAITING="bg-orange-100 text-orange-800",e.REGISTERED="bg-green-100 text-green-800",e.PICKED_UP="bg-green-100 text-green-800",e.IN_STORAGE="bg-green-100 text-green-800",e.SCHEDULED_FOR_CREMATION="bg-green-100 text-green-800",e.PERFORM_SPECIAL_ACTIVITIES="bg-green-100 text-green-800",e.READY_FOR_PICKUP_DELIVERY="bg-green-100 text-green-800",e.CREMATION_STARTED="bg-yellow-100 text-yellow-800",e.CREMATION_ENDED="bg-purple-900 text-purple-100",e.READY_FOR_SENDING="bg-green-100 text-green-800",e.COMPLETED="bg-green-100 text-green-800",e))(ye||{});const tt=e=>{if(!e.data)return null;const t=ge(e.data.status);let r="bg-orange-100 text-orange-800";return t==="Cremation started"&&(r="bg-yellow-100 text-yellow-800"),t==="Cremation ended"&&(r="bg-purple-900 text-purple-100"),t==="Ready for sending"&&(r="bg-green-100 text-green-800"),s.jsx("span",{className:`inline-flex rounded-md px-3 py-2 text leading-5 font-semibold ${r}`,children:t})},rt=e=>{const{data:t,context:r}=e;return t?t.whatsappStart?s.jsx(v,{text:"Yes",colorClass:"bg-green-100 text-green-800"}):s.jsx(v,{text:"No",colorClass:"bg-gray-200 text-gray-800"}):null},nt=e=>{const{data:t}=e;return t?t.whatsappFinish?s.jsx(v,{text:"Yes",colorClass:"bg-green-100 text-green-800"}):s.jsx(v,{text:"No",colorClass:"bg-gray-200 text-gray-800"}):null},st=({displayName:e,icon:t})=>s.jsxs("div",{className:"flex items-center space-x-2",children:[t&&s.jsx(t,{className:"text-active h-4 w-4"}),s.jsx("span",{children:e})]}),it=e=>{if(!e.data)return null;const{openFullTextModal:t,title:r,content:n}=e.colDef.cellRendererParams,i=n(e)||"",a=30,l=i.length>a?i.slice(0,a)+"â€¦":i;return s.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t(i,r),children:i&&s.jsx("div",{dangerouslySetInnerHTML:{__html:l}})})},at=({isOpen:e,title:t,text:r,onClose:n})=>e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),s.jsxs("div",{className:"relative z-10 max-h-[90vh] w-[90%] max-w-2xl overflow-y-auto rounded-lg bg-white p-6 shadow-lg",children:[s.jsxs("div",{className:"sticky top-0 mb-4 flex items-start justify-between bg-white py-3",children:[s.jsx("h3",{className:"text-lg font-semibold",children:t||"Details"}),s.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:s.jsx($,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"pb-3 text-sm whitespace-pre-wrap text-gray-800",dangerouslySetInnerHTML:{__html:r||""}})]})]}):null,ot=({type:e,message:t,isOpen:r})=>{const[n,i]=k.useState(r);return s.jsx(s.Fragment,{children:n&&s.jsxs(ze,{variant:"default",className:`mx-auto w-full max-w-4xl rounded-lg border p-4 shadow-sm ${e==="danger"?"border-red-200 bg-red-50 text-red-800 dark:border-red-700 dark:bg-red-900/40 dark:text-red-100":e==="success"?"border-green-200 bg-green-50 text-green-800 dark:border-green-700 dark:bg-green-900/40 dark:text-green-100":e==="warning"?"border-yellow-200 bg-yellow-50 text-yellow-800 dark:border-yellow-700 dark:bg-yellow-900/40 dark:text-yellow-100":"border-blue-200 bg-blue-50 text-blue-800 dark:border-blue-700 dark:bg-blue-900/40 dark:text-blue-100"} `,children:[s.jsx(ve,{className:"h-4 w-4"}),s.jsx(Ae,{className:`${e==="danger"?"text-red-800 dark:text-red-100":e==="success"?"text-green-800 dark:text-green-100":e==="warning"?"text-yellow-800 dark:text-yellow-100":"text-blue-800 dark:text-blue-100"} `,children:t}),s.jsxs("button",{onClick:()=>i(!1),className:"absolute top-1 right-1 p-2 text-gray-500 text-red-800 hover:text-gray-700",children:[s.jsx("span",{className:"sr-only",children:"close"}),s.jsx($,{className:"w-4"})]})]})})},lt=e=>{var l,o,c,f,u,m;if(!e.data)return null;const{setModalState:t}=e.colDef.cellRendererParams,r=h=>{h.stopPropagation(),t({isOpen:!0,pet:e.data})},n=(o=(l=e.data)==null?void 0:l.notifications)==null?void 0:o.some(h=>e.column.colId==="start"?h.title==="WhatsApp start message sent":h.title==="WhatsApp end message sent"),i=(c=e.data)==null?void 0:c.whatsappStart,a=(f=e.data)==null?void 0:f.whatsappFinish;return e.column.colId=="send"&&a==!1||e.column.colId=="start"&&i==!1?null:n?s.jsx("div",{children:s.jsxs("button",{disabled:!0,className:"flex w-full cursor-not-allowed items-center justify-center rounded-md bg-green-500 px-3 py-2 text-sm font-semibold text-white transition-colors","aria-label":`Notification sent for ${(u=e.data)==null?void 0:u.name}`,children:[s.jsx(ee,{className:"mr-1.5 h-4 w-4"}),"Sent"]})}):s.jsxs("button",{disabled:e.data.status==j.WAITING,onClick:r,className:`hover:bg-active flex w-full items-center justify-center rounded-md bg-primary px-3 py-2 text-sm font-semibold text-white transition-colors ${e.data.status==j.WAITING?"cursor-not-allowed opacity-30":""} `,"aria-label":`Send notification for ${(m=e.data)==null?void 0:m.name}`,children:[s.jsx(ce,{className:"mr-1.5 h-4 w-4"}),"Send"]})},ct=e=>{var o,c,f,u,m,h,x,_;if(!e.data)return null;const{setModalState:t}=e.colDef.cellRendererParams,r=d=>{d.stopPropagation(),t({isOpen:!0,pet:e.data})},n=(c=(o=e.data)==null?void 0:o.notifications)==null?void 0:c.some(d=>e.column.colId==="start"?d.title==="WhatsApp start message sent":d.title==="WhatsApp end message sent");console.log(e.data),(f=e.data)==null||f.whatsappStart;const i=(u=e.data)==null?void 0:u.whatsappFinish;if(e.column.colId=="send"&&i==!1)return null;const a=((m=e.data)==null?void 0:m.status)===j.CREMATION_ENDED&&((h=e.data)==null?void 0:h.notificationSent)==!0,l=e.column.colId==="send"&&!a;return n?s.jsx("div",{children:s.jsxs("button",{onClick:r,className:"flex w-full cursor-not-allowed items-center justify-center rounded-md bg-green-500 px-3 py-2 text-sm font-semibold text-white transition-colors","aria-label":`Notification sent for ${(x=e.data)==null?void 0:x.name}`,children:[s.jsx(ee,{className:"mr-1.5 h-4 w-4"}),"Sent"]})}):s.jsxs("button",{disabled:e.data.status==j.WAITING||l,onClick:r,className:`hover:bg-active flex w-full items-center justify-center rounded-md bg-primary px-3 py-2 text-sm font-semibold text-white transition-colors ${e.data.status==j.WAITING||l?"cursor-not-allowed opacity-30":""} `,"aria-label":`Send notification for ${(_=e.data)==null?void 0:_.name}`,children:[s.jsx(ce,{className:"mr-1.5 h-4 w-4"}),"Send"]})},pe=e=>{const{openFullTextModal:t,title:r,onUpdatePet:n,content:i}=e.colDef.cellRendererParams,{data:a,context:l,colDef:o}=e;if(!a)return null;const c=o.field.split("."),u=(N=>c.reduce((b,H)=>b==null?void 0:b[H],N))(a);if(!u)return s.jsx("span",{className:"text-gray-400",children:"-"});const{preparationStatus:m}=a,{enabled:h=!1,quantity:x=0,completed:_=!1,description:d=""}=u;if(h===!1)return s.jsx("span",{className:"text-gray-400",children:"-"});let p="";d===null?p="":p=d.length>50?d.slice(0,50)+"â€¦":d;const w=N=>{N.stopPropagation();const H=Ve(a,be=>{let U=be;for(let K=0;K<c.length-1;K++)U=U[c[K]];U[c[c.length-1]].completed=!_});n==null||n(H)};return s.jsxs("div",{className:"flex h-full w-full items-center space-x-2 py-1",children:[o.field!=="others_info"&&s.jsx("input",{type:"checkbox",checked:_,onChange:w,disabled:m==="Completed",className:"h-4 w-4 flex-shrink-0 cursor-pointer rounded border-gray-300 text-primary transition-colors checked:border-primary checked:bg-primary focus:ring-primary","aria-label":"Toggle task completion"}),s.jsxs("button",{onClick:N=>{let b="";o.field==="others_info"?b=d:b=u.urn>0||u.disc>0?`<b>Urn:</b> ${u.urn}, <b>Disc:</b> ${u.disc}, <b>Description:</b> ${d??""}`:x>0?`<b>Quantity:</b> ${x}, <b>Description:</b> ${d??""}`:`<b>Description:</b> ${d??""}`,N.stopPropagation(),t(b,r)},className:"min-w-0 flex-grow truncate overflow-hidden text-left text-sm font-semibold text-primary underline-offset-2 hover:underline",title:d,children:[o.field!=="others_info"&&s.jsxs(s.Fragment,{children:[(u.urn>0||u.disc>0)&&s.jsxs("span",{className:"flex-shrink-0 font-semibold text-gray-700",children:["Urn: ",u.urn," Disk: ",u.disc]}),u.urn===0&&u.disc===0&&x>0&&s.jsxs("span",{className:"flex-shrink-0 font-semibold text-gray-700",children:["(",x,")"]})]}),s.jsx("div",{dangerouslySetInnerHTML:{__html:p}})]})]})},dt=e=>{var a;if(!e.data)return null;const{onView:t,onEdit:r,onPrint:n}=e.context,{onDelete:i}=((a=e.colDef)==null?void 0:a.cellRendererParams)||{};return s.jsxs("div",{className:"flex h-full items-center space-x-2",children:[s.jsx("button",{onClick:()=>t(e.data),className:"text-active p-1 text-primary","aria-label":`View details for ${e.data.name}`,children:s.jsx(je,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>r(e.data),className:"text-active p-1 text-primary","aria-label":`Edit details for ${e.data.name}`,children:s.jsx(Te,{className:"h-5 w-5"})}),i&&s.jsx("div",{className:"flex h-full items-center justify-center space-x-2",children:s.jsx("button",{onClick:()=>i(e.data),className:"text-active p-1 text-primary","aria-label":`Delete details for ${e.data.name}`,children:s.jsx(Ee,{className:"h-5 w-5"})})}),s.jsx("button",{onClick:()=>n(e.data),className:"text-active p-1 text-primary","aria-label":`Print details for ${e.data.name}`,children:s.jsx(Oe,{className:"h-5 w-5"})})]})},ut=e=>{const{data:t,value:r,context:n}=e;if(!t)return null;const{setModalState:i,setErrorMessage:a,setStatus:l,openErrorModal:o}=e.colDef.cellRendererParams,c=u=>{if(u.stopPropagation(),t.preparationStatus==""||t.preparationStatus=="No"){if([t.specialRequestPawPrintInk,t.specialRequestHairPluck,t.specialRequestPawPrintClay,t.specialRequestNoseImprint].find(x=>x&&x.enabled&&!x.completed)){o("Please mark all required tasks as completed (except Engraving) before finishing preparation.");return}i({isOpen:!0,pet:e.data,status:"No"})}else t.preparationStatus=="Completed"&&i({isOpen:!0,pet:e.data,status:"Completed"})};let f;switch(t.preparationStatus){case"Yes":f=s.jsxs("button",{onClick:c,className:"hover:bg-active flex items-center justify-center rounded-lg bg-primary px-3 py-1.5 text-sm font-semibold text-white transition-colors",children:[s.jsx(ee,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Yes"})]});break;case"Completed":f=s.jsxs("button",{onClick:c,className:"flex items-center justify-center rounded-lg bg-green-600 px-3 py-1.5 text-sm font-semibold text-white transition-colors hover:bg-green-700",children:[s.jsx(Se,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Completed"})]});break;default:f=s.jsxs("button",{onClick:c,className:"flex items-center justify-center rounded-lg bg-red-500 px-3 py-1.5 text-sm font-semibold text-white transition-colors hover:bg-red-600",children:[s.jsx($,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"No"})]})}return s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:f})},ft=e=>{if(!e.data)return null;const{hasProstheses:t,prosthesesDetails:r}=e.data;return s.jsx("div",{className:"flex justify-center space-x-2",title:r,children:t?s.jsx("div",{className:"text-2xl",children:"ðŸ”©"}):s.jsx("div",{})})},xt=e=>{var n,i,a,l,o,c,f,u,m;const t=h=>{h.stopPropagation();const{markNotificationAsOkToSend:x}=e.colDef.cellRendererParams;x(e.data)};let r=(a=(i=(n=e.data)==null?void 0:n.notify)==null?void 0:i.notifiy_admin)==null?void 0:a.send;return(l=e.data)!=null&&l.notify&&(r=(typeof((o=e.data)==null?void 0:o.notify)=="string"?JSON.parse((c=e.data)==null?void 0:c.notify):(f=e.data)==null?void 0:f.notify).notifiy_admin.send||!1),((u=e.data)==null?void 0:u.status)!==j.CREMATION_ENDED?null:r?s.jsx(v,{text:"Admin notified",colorClass:"bg-green-200 text-green-900 font-semibold"}):s.jsx("div",{children:s.jsxs("button",{onClick:t,className:"hover:bg-active flex h-full w-full items-center justify-center rounded-md bg-blue-800 px-3 py-2 text-sm font-semibold text-white transition-colors","aria-label":`Send notification for ${(m=e.data)==null?void 0:m.name}`,children:[s.jsx(ke,{className:"mr-1.5 h-4 w-4"}),"Ok to Send"]})})},ht=e=>{var x,_;const[t,r]=k.useState(!1),[n,i]=k.useState({top:0,left:0}),a=k.useRef(null),[l,o]=k.useState(!1),c=((x=e.data)==null?void 0:x.notifications)||[],f=c.filter(d=>!d.is_read||d.is_read=="0"||d.is_read===0||d.is_read===!1),u=parseInt(localStorage.getItem("noti_"+((_=e.data)==null?void 0:_.id))||"0"),m=u&&u>f.length;k.useEffect(()=>{o(!1)},[c.length]);const h=()=>{var d;if(c.length!=0&&a.current){localStorage.setItem("noti_"+((d=e.data)==null?void 0:d.id),JSON.stringify(c.length));const p=a.current.getBoundingClientRect();i({top:p.top+window.scrollY+25,left:p.left-200}),r(w=>!w),!t&&m&&(o(!0),_e.post(route("notifications.mark-as-read"),{pet_id:e.data.id}).then(()=>{const w=c.map(b=>({...b,is_read:1})),{onUpdatePet:N}=e.colDef.cellRendererParams;N&&N({...e.data,notifications:w})}))}};return k.useEffect(()=>{const d=p=>{var w;(w=a.current)!=null&&w.contains(p.target)||r(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),e.data?s.jsxs(s.Fragment,{children:[s.jsxs("div",{ref:a,onClick:h,className:`relative inline-flex items-center justify-center ${c.length>0?"cursor-pointer":"cursor-default"}`,children:[s.jsx(Pe,{className:`h-5 w-5 ${c.length>0?"stroke-primary":"stroke-primary/30"}`}),f.length-u>0&&s.jsx("span",{className:"absolute -top-2 -right-2 h-4 w-4 rounded-full bg-red-600 text-center text-[10px] text-white",children:f.length-u})]}),t&&Ne.createPortal(s.jsxs("div",{style:{position:"absolute",top:n.top,left:n.left,zIndex:9999},className:"w-72 rounded-lg border bg-white p-3 shadow-lg",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Notifications"}),s.jsx("button",{onClick:()=>r(!1),children:s.jsx($,{className:"h-4 w-4 text-gray-500 hover:text-gray-700"})})]}),c.length===0?s.jsx("p",{className:"text-sm text-gray-500",children:"No new notifications"}):s.jsx("ul",{className:"max-h-60 divide-y overflow-y-auto",children:[...c].sort((d,p)=>new Date(p.created_at).getTime()-new Date(d.created_at).getTime()).map(d=>s.jsxs("li",{className:"py-2 text-sm",children:[s.jsx("div",{className:"font-medium text-gray-800",children:d.title}),s.jsx("div",{className:"text-gray-600 text-sm",children:d.message}),s.jsx("div",{className:"mt-1 text-xs text-gray-400",children:new Date(d.created_at).toLocaleString()})]},d.id))})]}),document.body)]}):null},mt=(e,t,r,n,i)=>({field:e,headerName:t,cellRenderer:pe,cellRendererParams:{openFullTextModal:r,title:t,content:a=>{var f;const l=(f=a.data)==null?void 0:f[e];if(!l||!l.enabled)return"";const o=l.description??"";return`${l.quantity??""} ${o}`.trim()},onUpdatePet:n,checkCompletionStatus:i}}),Ct=Object.freeze(Object.defineProperty({__proto__:null,ActionCellRenderer:dt,AlertMessage:ot,BADGE_CLASSES:ye,BadgeRenderer:v,ButtonCellRenderer:lt,CermoniInput:et,CremationStatusCellRenderer:tt,CustomHeader:st,CustomerCellRenderer:Qe,FullTextModal:at,NameRasCellRenderer:Xe,NotificationCellRenderer:ht,OKButtonCellRenderer:xt,OnlyNameRasCellRenderer:Ze,OtherMessageCellRender:it,PreparationActionButton:ut,ProsthesisCellRenderer:ft,ReadyForCremationCellRenderer:Ge,SendCellRenderer:ct,StartCellRenderer:rt,StopCellRenderer:nt,TaskDescriptionCellRenderer:pe,createTaskColumn:mt,mapPetStatusToDisplay:ge},Symbol.toStringTag,{value:"Module"}));export{dt as A,ye as B,tt as C,at as F,Xe as N,it as O,Oe as P,rt as S,ht as a,st as b,nt as c,ct as d,Ze as e,ft as f,lt as g,xt as h,mt as i,ot as j,ut as k,Qe as l,ge as m,Ve as p,Ct as r};
