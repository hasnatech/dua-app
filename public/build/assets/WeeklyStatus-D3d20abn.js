import{r as d,j as e,b as P}from"./app-CMgd9CFO.js";import{C as I}from"./chevron-left-CX5OGnks.js";import{C as R}from"./chevron-right-NGM6CfF9.js";import{S as A}from"./sparkles-DqCGk1FT.js";import{P as F}from"./paw-print-D0UC6vtx.js";import{L as W}from"./library-E2nNABdg.js";import{S as Y,M as O}from"./sun-DGPMDXGc.js";import"./createLucideIcon-7qGfDxei.js";const Q=()=>{const[s,w]=d.useState(null),[l,h]=d.useState("week"),[o,v]=d.useState(new Date),[B,u]=d.useState(!0),[b,y]=d.useState(null);d.useEffect(()=>{(async()=>{try{u(!0);const a=await P.post(route("report.getPetStats"),{date:o.toISOString()});w(a.data.data),u(!1)}catch(a){y(a.message||"Error fetching pets"),u(!1)}})()},[o]);const N=(t,a)=>t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate(),D=t=>{const a=new Date(t);a.setHours(0,0,0,0);const i=a.getDay(),x=a.getDate()-i+(i===0?-6:1);return a.setDate(x),a},{dateRangeLabel:S,dayStats:k,weekStats:M,monthStats:C}=d.useMemo(()=>{var p;if(!s)return{dateRangeLabel:"",dayStats:null,weekStats:[],monthStats:null};let t="";const a=new Date,i={total:s.Day.Total,individual:s.Day.Individual,collective:s.Day.Collective,morning:s.Day.Morning,evening:s.Day.Evening},x={total:s.Month.Total,individual:s.Month.Individual,collective:s.Month.Collective,morning:s.Month.Morning,evening:s.Month.Evening},c=D(o),f=Array.from({length:7}).map((n,r)=>{const j=new Date(c);return j.setDate(c.getDate()+r),j}),E=((p=s==null?void 0:s.Week)==null?void 0:p.daily.map(n=>{const r=new Date(n.date);return{date:r,dayName:r.toLocaleString("default",{weekday:"short"}),dateNum:r.getDate(),isToday:N(r,a),total:n.Total,individual:n.Individual,collective:n.Collective}}))||[];switch(l){case"day":t=o.toLocaleDateString("default",{weekday:"long",year:"numeric",month:"long",day:"numeric"});break;case"week":const n=c.toLocaleString("default",{month:"short"}),r=f[6].toLocaleString("default",{month:"short"});t=n===r?`${n} ${c.getDate()} - ${f[6].getDate()}, ${c.getFullYear()}`:`${n} ${c.getDate()} - ${r} ${f[6].getDate()}, ${c.getFullYear()}`;break;case"month":t=o.toLocaleString("default",{month:"long",year:"numeric"});break}return{dateRangeLabel:t,dayStats:i,weekStats:E,monthStats:x}},[s,o,l]),$=()=>{const t=new Date(o);l==="day"&&t.setDate(t.getDate()-1),l==="week"&&t.setDate(t.getDate()-7),l==="month"&&t.setMonth(t.getMonth()-1),v(t)},L=()=>{const t=new Date(o);l==="day"&&t.setDate(t.getDate()+1),l==="week"&&t.setDate(t.getDate()+7),l==="month"&&t.setMonth(t.getMonth()+1),v(t)},g=({label:t,isActive:a,onClick:i})=>e.jsx("button",{onClick:i,className:`px-4 py-2 text-sm font-semibold transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-primary ${a?"border-b-2 border-primary text-primary":"text-active border-b-2 border-transparent hover:text-primary"}`,children:t}),m=({label:t,value:a,icon:i,color:x})=>e.jsxs("div",{className:"flex items-start rounded-lg bg-background/50 p-4",children:[e.jsx("div",{className:`mr-4 flex h-10 w-10 items-center justify-center rounded-lg ${x}`,children:i}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:a}),e.jsx("p",{className:"text-active text-sm font-medium",children:t})]})]}),T=()=>{switch(l){case"week":return e.jsx("div",{className:"flex flex-col gap-2",children:M.map(a=>e.jsxs("div",{className:`flex items-center justify-between rounded-lg p-3 ${a.isToday?"border border-primary/40 bg-primary/10":"bg-background"}`,children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:`mr-3 w-12 text-center ${a.isToday?"text-primary":"text-active"}`,children:[e.jsx("p",{className:"text-sm font-bold",children:a.dayName}),e.jsx("p",{className:"text-2xl font-light",children:a.dateNum})]})}),e.jsxs("div",{className:"flex items-center space-x-4 pr-2 text-sm font-medium",children:[e.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[e.jsx("span",{className:"text-active text-xs",children:"Total"}),e.jsx("span",{className:"text-lg font-semibold text-primary",children:a.total})]}),e.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[e.jsx("span",{className:"text-active text-xs",children:"Indiv."}),e.jsx("span",{className:"text-lg font-semibold text-green-700",children:a.individual})]}),e.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[e.jsx("span",{className:"text-active text-xs",children:"Collect."}),e.jsx("span",{className:"text-lg font-semibold text-blue-700",children:a.collective})]})]})]},a.date.toISOString()))});case"day":case"month":const t=l==="day"?k:C;return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(m,{label:"Total Taken",value:(t==null?void 0:t.total)||0,icon:e.jsx(A,{className:"h-6 w-6 text-white"}),color:"bg-green-600"}),e.jsx(m,{label:"Individual",value:(t==null?void 0:t.individual)||0,icon:e.jsx(F,{className:"h-6 w-6 text-white"}),color:"bg-primary"}),e.jsx(m,{label:"Collective",value:(t==null?void 0:t.collective)||0,icon:e.jsx(W,{className:"h-6 w-6 text-white"}),color:"bg-blue-600"}),e.jsx(m,{label:"Morning Ceremony",value:(t==null?void 0:t.morning)||0,icon:e.jsx(Y,{className:"h-6 w-6 text-white"}),color:"bg-amber-500"}),e.jsx(m,{label:"Evening Ceremony",value:(t==null?void 0:t.evening)||0,icon:e.jsx(O,{className:"h-6 w-6 text-white"}),color:"bg-indigo-600"})]});default:return null}};return b?e.jsxs("p",{children:["Error: ",b]}):e.jsxs("div",{className:"flex h-full flex-col rounded-xl bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsxs("div",{className:"mb-2 flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:"Status Overview"}),e.jsx("p",{className:"text-active text-sm font-medium",children:S})]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2 md:mt-0",children:[e.jsx("button",{onClick:$,className:"hover:bg-panel rounded-full p-2 transition-colors","aria-label":`Previous ${l}`,children:e.jsx(I,{className:"text-active h-5 w-5"})}),e.jsx("button",{onClick:L,className:"hover:bg-panel rounded-full p-2 transition-colors","aria-label":`Next ${l}`,children:e.jsx(R,{className:"text-active h-5 w-5"})})]})]}),e.jsxs("div",{className:"mb-4 flex border-b border-border",children:[e.jsx(g,{label:"Day",isActive:l==="day",onClick:()=>h("day")}),e.jsx(g,{label:"Week",isActive:l==="week",onClick:()=>h("week")}),e.jsx(g,{label:"Month",isActive:l==="month",onClick:()=>h("month")})]})]}),e.jsx("div",{className:"-mr-2 flex-grow overflow-y-auto pr-2",children:T()})]})};export{Q as default};
